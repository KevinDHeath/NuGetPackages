# Version 2.1.2 Refactoring Notes
Refactoring is the process of restructuring code to improve the design, structure, implementation, code readability, and reduce complexities.

## Exception handling
The following methods will throw exceptions rather than ignoring them:

**DataServiceBase**
- `DeleteResource` can throw `AggregateException`
- `GetResource` can throw `AggregateException`
- `PostResource<T>` can throw `AggregateException`
- `PutResource<T>` can throw `AggregateException`

**JsonConverters**
- `DeserializeFile<T>` can throw `ArgumentException, NotSupportedException, IOException, OutOfMemoryException, SecurityException, UnauthorizedAccessException`
- `ReadJsonFromFile` can throw `ArgumentException, NotSupportedException, IOException, OutOfMemoryException, SecurityException, UnauthorizedAccessException`
- `Serialize<T>` _(to file)_ can throw `ArgumentException, NotSupportedException, IOException, SecurityException, UnauthorizedAccessException`
- `Serialize<T>` _(to JSON)_ can throw `NotSupportedException`

## Cyclomatic complexity
The aim was to reduce all methods with a score of 30 or more\
_(30 is the default that triggers a risk hotspot on the report)_.

`Company.UpdateSQL` method reduced from 28 to 26.\
`Person.UpdateSQL` method reduced from 36 to 26.\
`ReflectionHelper.ApplyChanges` method reduced from 34 to 16.\
`ReflectionHelper.CreateDeepCopy` method reduced from 30 to 26.\
`ReflectionHelper.IsEqual` method reduced from 36 to 22.

## Other changes
- Changed `Address.UpdateAddress` internal method to public and return boolean value.
- `AddressFactoryBase` methods `CheckProvinceCode` and `GetProvinceName` to correctly handle null values.
- `DataFactoryBase` to simplify `GetFileResource` method.
- Removed `ModelData` internal method `Changed` as it is no longer required.
- `JsonConverters` to handle nulls on `Write` method.\
_(Added override of HandleNull property)_
- Changed `Person` and `User` models to correct the DateOnly comparisons.

